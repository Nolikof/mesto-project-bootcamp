(()=>{"use strict";var e={cardItem:".photo-card",cardTitle:".photo-card__title",cardImage:".photo-card__image",heartButton:".photo-card__button-heart",deleteButton:".photo-card__button-delete",popupViewingPhoto:".viewing-photo",popupPhotoСard:"#add-photo-card",popupTitle:"#popup-photo-title ",popupImageLink:"#popup-photo-subtitle",photoCardForm:".popup__form",photoCardPlace:".photo-grid__list"},t={formSelector:".popup__form",inputSelector:".popup__item",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__item_type_error",errorClass:"popup__error_visible"},o=["formSelector"];var r=function(e,t,o){var r=Object.assign({},o);e.classList.remove(r.inputErrorClass),t.classList.remove(r.errorClass),t.textContent=""},n=function(e,t){var o=Object.assign({},t),r=Array.from(e.querySelectorAll(o.inputSelector)),n=e.querySelector(o.submitButtonSelector);!function(e){return e.some((function(e){return!e.validity.valid}))}(r)?(n.removeAttribute("disabled"),n.classList.remove(o.inactiveButtonClass)):(n.setAttribute("disabled",!0),n.classList.add(o.inactiveButtonClass))},i=function(e){var t=e.formSelector,i=function(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}(e,o);Array.from(document.querySelectorAll(t)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var o=Object.assign({},t);Array.from(e.querySelectorAll(o.inputSelector)).forEach((function(t){t.addEventListener("input",(function(){(function(e,t,o){var n=Object.assign({},o),i=e.querySelector(".".concat(t.id,"-error"));t.validity.valid?r(t,i,n):function(e,t,o,r){var n=Object.assign({},r);e.classList.add(n.inputErrorClass),t.classList.add(n.errorClass),t.textContent=o}(t,i,t.validationMessage,n)})(e,t,o),n(e,o)}))}))}(e,i)}))},c=function(e){e.classList.add("popup_opened"),document.addEventListener("keydown",s),document.addEventListener("mousedown",d)},u=function(e){var o=e.querySelector(".popup__form");o.reset(),function(e,t){var o=Object.assign({},t);Array.from(e.querySelectorAll(o.inputSelector)).forEach((function(t){var n=e.querySelector(".".concat(t.id,"-error"));r(t,n,o)}))}(o,t)},p=function(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",s),document.removeEventListener("mousedown",d)},a=function(e){event.preventDefault(),p(e)},l=function(e){e.querySelector(".popup__close-button").addEventListener("click",(function(){p(e)}))},s=function(){"Escape"===event.key&&p(document.querySelector(".popup_opened"))},d=function(){event.target.classList.contains("popup_opened")&&p(document.querySelector(".popup_opened"))};function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function m(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var v,y,b,_,g,S,h,O,j,q,k=function(e,t){var o=Object.assign({},t),r=document.querySelector("#photo-card-template").content.querySelector(o.cardItem).cloneNode(!0),n=document.querySelector(o.popupViewingPhoto),i=r.querySelector(o.cardImage);return function(e,t,o,r,n){var i=Object.assign({},n);!function(e,t){var o=Object.assign({},t);e.querySelector(o.heartButton).addEventListener("click",(function(e){e.target.classList.toggle("photo-card__button-heart_active")}))}(t,i),function(e,t){var o=Object.assign({},t),r=e.querySelector(o.deleteButton);r.addEventListener("click",(function(){r.closest(o.cardItem).remove()}))}(t,i),function(e,t,o,r){Object.assign({},r),o.addEventListener("click",(function(){!function(e,t){var o=e.querySelector(".viewing-photo__image"),r=e.querySelector(".viewing-photo__figcaption");o.src=t.link,o.alt=t.name,r.textContent=t.name}(e,t),c(e)}))}(e,o,r,function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){m(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},i)),l(e)}(n,r,e,i,o),function(e,t,o,r){var n=Object.assign({},r);t.querySelector(n.cardTitle).textContent=o.name,e.src=o.link,e.alt=o.name}(i,r,e,o),r},E=function(e,t){var o=Object.assign({},t),r=k(e,o);document.querySelector(o.photoCardPlace).prepend(r)},L=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}];v={profileForm:".popup__form",profileTitle:".profile__title",profileSubtitle:".profile__subtitle",profileEditButton:".profile__button-edit",popupProfile:"#add-profile",popupProfileTitle:"#popup-profile-title",popupProfileSubtitle:"#popup-profile-subtitle"},_=Object.assign({},v),g=document.querySelector(_.popupProfile),S=g.querySelector(_.profileForm),h=S.querySelector(_.popupProfileTitle),O=S.querySelector(_.popupProfileSubtitle),j=document.querySelector(_.profileTitle),q=document.querySelector(_.profileSubtitle),document.querySelector(_.profileEditButton).addEventListener("click",(function(){u(g),h.value=j.textContent,O.value=q.textContent,n(S,t),c(g)})),S.addEventListener("submit",(function(){j.textContent=h.value,q.textContent=O.value,a(g)})),l(g),y=document.querySelector("#add-photo-card"),b=y.querySelector(".popup__form"),document.querySelector(".profile__button-add").addEventListener("click",(function(){u(y),n(b,t),c(y)})),function(e){var t=Object.assign({},e);L.forEach((function(e){E(e,t)}))}(e),function(e){var t=Object.assign({},e),o=document.querySelector(t.popupPhotoСard),r=o.querySelector(t.photoCardForm);r.addEventListener("submit",(function(){var e=r.querySelector(t.popupTitle),n=r.querySelector(t.popupImageLink),i=e.value,c=n.value;E({name:i,link:c},t),a(o)})),l(o)}(e),function(e){var t=Object.assign({},e);i(t)}(t)})();